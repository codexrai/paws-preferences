<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paws & Preferences</title>

<style>
  body{
    margin:0;
    font-family:system-ui, sans-serif;
    background: linear-gradient(180deg,#faf5ff,#f3e8ff);
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
  }

  .app{
    width:90%;
    max-width:360px;
    text-align:center;
  }

  h1{ margin:10px 0; }

  .progress{
    font-size:14px;
    margin-bottom:6px;
    opacity:.7;
  }

  .deck{
    position:relative;
    width:100%;
    height:450px;
  }

  .card{
    position:absolute;
    width:100%;
    height:100%;
    background:#fff;
    border-radius:18px;
    overflow:hidden;
    box-shadow:0 8px 18px rgba(0,0,0,.15);
    user-select:none;
    touch-action:none;
    display:flex;
    justify-content:center;
    align-items:center;
    transition:transform .2s ease;
  }

  .deck img{
    width:100%;
    height:100%;
    object-fit:cover;
  }

  .card:nth-child(2){
    transform: scale(.95) translateY(10px);
    opacity:.9;
  }

  .card:nth-child(3){
    transform: scale(.9) translateY(20px);
    opacity:.8;
  }

  .badge{
    position:absolute;
    top:20px;
    padding:6px 14px;
    font-weight:800;
    border-radius:10px;
    border:3px solid;
    opacity:0;
    background:#fff8;
  }

  .like{
    right:16px;
    color:#16a34a;
    border-color:#16a34a;
  }

  .nope{
    left:16px;
    color:#dc2626;
    border-color:#dc2626;
  }

  .buttons{
    margin-top:12px;
    display:flex;
    justify-content:space-between;
  }

  button{
    width:120px;
    padding:8px 0;
    border:0;
    font-size:16px;
    border-radius:14px;
    background:#fff;
    box-shadow:0 4px 10px rgba(0,0,0,.15);
    cursor:pointer;
  }

  #summary{
    display:none;
  }

  .grid{
    margin-top:10px;
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:8px;
  }

  .grid img{
    width:100%;
    border-radius:10px;
  }
</style>
</head>

<body>
<div class="app">

  <h1>Paws & Preferences</h1>
  <div class="progress" id="progress"></div>

  <div class="deck" id="deck"></div>

  <div class="buttons">
    <button id="noBtn"> ‚ùå </button>
    <button id="likeBtn"> ü©∑ </button>
  </div>

  <div id="summary">
    <h2>Results</h2>
    <p id="likedCount"></p>
    <div class="grid" id="grid"></div>
    <br>
    <button onclick="restart()">Restart</button>
  </div>

</div>

<script>
const TOTAL = 15;
const deck = document.getElementById("deck");
const progress = document.getElementById("progress");
const grid = document.getElementById("grid");
const summary = document.getElementById("summary");
const likedCount = document.getElementById("likedCount");

let index = 0;
let liked = [];

const cats = Array.from({length:TOTAL},(_,i)=>
  `https://cataas.com/cat?${Date.now()}-${i}`
);

function createCard(src){
  const card = document.createElement("div");
  card.className="card";

  const img = document.createElement("img");
  img.src=src;

  const like = document.createElement("div");
  like.className="badge like";
  like.textContent="LIKE";

  const nope = document.createElement("div");
  nope.className="badge nope";
  nope.textContent="NOPE";

  card.append(img,like,nope);

  return card;
}

function render(){
  deck.innerHTML="";
  cats.slice(index,index+3).reverse().forEach(src=>{
    deck.append(createCard(src));
  });

  progress.textContent = `${Math.min(index+1,TOTAL)} / ${TOTAL}`;
  attachDrag();
}

function attachDrag(){
  const top = deck.lastElementChild;
  if(!top) return;

  let startX = 0;
  let dx = 0;

  const like = top.querySelector(".like");
  const nope = top.querySelector(".nope");

  const start = e=>{
    startX = (e.touches ? e.touches[0] : e).clientX;
    top.style.transition="none";
  }

  const move = e=>{
    if(!startX) return;

    dx = (e.touches ? e.touches[0] : e).clientX - startX;
    const tilt = dx/15;

    top.style.transform = `translateX(${dx}px) rotate(${tilt}deg)`;

    like.style.opacity = dx > 0 ? Math.min(dx/80,1):0;
    nope.style.opacity = dx < 0 ? Math.min(-dx/80,1):0;
  }

  const end = ()=>{
    top.style.transition="transform .25s ease-out";
    if(dx > 120) swipe("right");
    else if(dx < -120) swipe("left");
    else top.style.transform="";

    startX=0;
    dx=0;
  }

  top.onpointerdown=start;
  window.onpointermove=move;
  window.onpointerup=end;

  top.ontouchstart=start;
  window.ontouchmove=move;
  window.ontouchend=end;
}

function swipe(dir){
  const card = deck.lastElementChild;

  card.style.transform = `translateX(${dir==="right"?1000:-1000}px) rotate(${dir==="right"?30:-30}deg)`;

  setTimeout(()=>{
    if(dir==="right") liked.push(cats[index]);
    index++;
    if(index>=TOTAL) showSummary();
    else render();
  },200);

}

function showSummary(){
  deck.style.display = "none";
  document.querySelector(".buttons").style.display="none";
  progress.style.display="none";
  summary.style.display="block";

    likedCount.textContent = `You liked ${liked.length} cats`;

  liked.forEach(url=>{
    const img=document.createElement("img");
    img.src=url;
    grid.appendChild(img);
  });
}

function restart(){
  index=0;
  liked=[];
  grid.innerHTML="";
  deck.style.display="block";
  document.querySelector(".buttons").style.display="flex";
  progress.style.display="block";
  summary.style.display="none";
  render();
}

document.getElementById("likeBtn").onclick=()=>swipe("right");
document.getElementById("noBtn").onclick=()=>swipe("left");

render();
</script>
</body>
</html>

